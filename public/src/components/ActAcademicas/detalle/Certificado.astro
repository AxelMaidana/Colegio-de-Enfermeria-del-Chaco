--- 
import Boton from '../../layout/Reusable/Boton.astro';
---

<div class="flex flex-col md:flex-row py-10 px-6 md:px-40 justify-between items-center bg-[url('/media/certificado.png')] bg-cover bg-center bg-no-repeat relative">
    <div class="absolute inset-0 bg-gradient-to-t from-white via-transparent to-white pointer-events-none"></div>

    <div class="relative z-10">
        <h1 class="text-3xl md:text-4xl font-extrabold md:max-w-md text-black/85">¿Te gustaría obtener tu Certificado?</h1>
        <p class="text-gray-700 font-semibold mt-2 max-w-md pt-2">
            Si estás interesado en recibir tu certificado, haz clic en el botón de abajo y lo gestionaremos para vos.
        </p>
    </div>
    
    <div class="relative z-10">
        <Boton title="SOLICITAR CERTIFICADO"
            shadow="shadow-customButton shadow-black/40"
            sizeText="text-xl md:text-2xl"
            color="bg-customBlue text-white"
            rounded="rounded-xl"
            size="w-full md:w-auto"
            id="certificat-btn"
        />
    </div>

    <!-- Modal principal -->
    <div id="certificat-stepOne-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
        <div class="bg-white text-customBlack p-6 md:p-8 rounded-3xl shadow-lg max-w-md md:max-w-xl w-full transform transition-transform duration-300 scale-95 translate-y-4">
            <div class="flex flex-col items-center mb-6">
                <div class="flex items-center w-full">
                    <button class="flex-1 h-12 text-sm md:text-base rounded-2xl text-white bg-customBlue flex items-center justify-center font-semibold cursor-default">Formulario</button>
                    <div class="w-20 border-t border-customBlue mx-2"></div>
                    <button class="flex-1 h-12 rounded-2xl text-customBlue border-2 border-customBlue flex items-center justify-center font-semibold cursor-default">Pago</button>
                </div>
            </div>

            <h2 class="text-2xl md:text-3xl text-center font-bold mt-2 mb-6">SOLICITUD DE CERTIFICADO</h2>

            <form class="space-y-6">
                <div class="mb-4">
                    <label for="first-name" class="block text-lg font-bold">Nombre</label>
                    <input type="text" id="first-name" class="border border-customBlack rounded-2xl w-full p-2" required />
                </div>
                <div class="mb-4">
                    <label for="last-name" class="block text-lg font-bold">Apellido</label>
                    <input type="text" id="last-name" class="border border-customBlack rounded-2xl w-full p-2" required />
                </div>
                <div class="mb-4">
                    <label for="dni" class="block text-lg font-bold">DNI</label>
                    <input type="text" id="dni" class="border border-customBlack rounded-2xl w-full p-2" required />
                </div>
                <div class="mb-4">
                    <label for="birthdate" class="block text-lg font-bold">Fecha de Nacimiento</label>
                    <input type="date" id="birthdate" class="border border-customBlack rounded-2xl w-full p-2" required />
                </div>

                <div class="flex justify-end pt-4 mt-8">
                    <button id="stepTwo-btn" class="text-customBlue underline transition duration-300 hover:scale-105 text-sm font-semibold">SIGUIENTE</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de pago de Certificación -->
    <div id="certificat-stepTwo-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
        <div class="bg-white text-customBlack p-6 md:p-8 rounded-3xl shadow-lg max-w-md md:max-w-xl w-full transform transition-transform duration-300 scale-95 translate-y-4">
            <div class="flex flex-col items-center mb-6">
                <div class="flex items-center w-full">
                    <button class="flex-1 h-12 text-sm md:text-base rounded-2xl text-customBlue border-2 border-customBlue flex items-center justify-center font-semibold cursor-default">Formulario</button>
                    <div class="w-20 border-t border-customBlue mx-2"></div>
                    <button class="flex-1 h-12  rounded-2xl text-white border-2 bg-customBlue flex items-center justify-center font-semibold cursor-default">Pago</button>
                </div>
            </div>

            <h2 class="text-2xl md:text-3xl text-center font-bold mt-2 mb-6">SOLICITUD DE CERTIFICADO</h2>

            <form>
                <div>
                    <h2 class="block text-lg font-bold">Datos bancarios</h2>
                    <p class="text-sm text-gray-700">Blablablabla</p>
                </div>
                <div>
                    <h2 class="block text-lg font-bold">Datos bancarios</h2>
                    <p class="text-sm text-gray-700">Blablablabla</p>
                </div>
                <div>
                    <h2 class="block text-lg font-bold">Datos bancarios</h2>
                    <p class="text-sm text-gray-700">Blablablabla</p>
                </div>

                <div class="mb-4 mt-4">
                    <h2 class="block text-lg font-bold">Comprobante</h2>
                    <div class="bg-gray-300 rounded-2xl w-full h-40"></div>
                </div>

                <div class="flex justify-center flex-col items-center mt-10 mb-3">
                    <button id="stepThree-btn" class="bg-customBlue transition duration-300 hover:scale-105 text-white text-sm font-semibold px-6 py-3 rounded-2xl">FINALIZAR CERTIFICACIÓN</button>
                </div>
            </form>
        </div>
    </div>

    <!--Certificación completada-->
    <div id="certificat-stepThree-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 hidden">
        <div class="bg-customCyan text-customBlack p-6 md:p-8 rounded-3xl shadow-lg max-w-md md:max-w-lg w-full transform transition-transform duration-300 scale-95 translate-y-4" id="modal-content">
          <h2 class="text-3xl md:text-4xl text-center font-extrabold mb-4">¡SOLICITUD ENVIADA CON ÉXITO!</h2>
          <p class="text-sm md:text-base text-center font-semibold mb-6">Tu solicitud de certificado se ha realizado con éxito. Nos pondremos en contacto contigo a la brevedad para brindarte más detalles.</p>
          
          <div class="flex justify-center flex-col items-center mb-3">
            <button id="close-btn" class="bg-customBlue transition duration-300 hover:scale-105 text-white text-lg md:text-3xl font-extrabold px-6 py-2 rounded-xl">CONTINUAR</button>
          </div>
        </div>
    </div>

</div>
    
<script>
    // Función para abrir el modal principal
    document.getElementById('certificat-btn').addEventListener('click', () => {
        const modal = document.getElementById('certificat-stepOne-modal');
        modal.classList.remove('hidden');
        modal.classList.remove('opacity-0', 'pointer-events-none');
        modal.classList.add('opacity-100');
        setTimeout(() => {
            const modalContent = modal.querySelector('div');
            if (modalContent) modalContent.classList.remove('scale-95', 'translate-y-4');
        }, 10);
    });

    // Cerrar el modal principal al hacer clic fuera de él
    document.getElementById('certificat-stepOne-modal').addEventListener('click', (e) => {
        const target = e.target as HTMLElement;  // Casting a HTMLElement
        if (target.id === 'certificat-stepOne-modal') {
            closeModal();
        }
    });

    // Abrir el modal de pago al hacer clic en "SIGUIENTE"
    document.getElementById('stepTwo-btn').addEventListener('click', (e) => {
        e.preventDefault();  // Evita el envío del formulario si es un botón dentro de un form
        const modal = document.getElementById('certificat-stepTwo-modal');
        closeModal(); // Cierra el modal principal
        modal.classList.remove('hidden');
        modal.classList.remove('opacity-0', 'pointer-events-none');
        modal.classList.add('opacity-100');
        setTimeout(() => {
            const modalContent = modal.querySelector('div');
            if (modalContent) modalContent.classList.remove('scale-95', 'translate-y-4');
        }, 10);
    });

    // Cerrar el modal de pago al hacer clic fuera de él
    document.getElementById('certificat-stepTwo-modal').addEventListener('click', (e) => {
        const target = e.target as HTMLElement;  // Casting a HTMLElement
        if (target.id === 'certificat-stepTwo-modal') {
            closeLoginModal();
        }
    });

    // Función para cerrar el modal principal
    function closeModal() {
        const modal = document.getElementById('certificat-stepOne-modal');
        const modalContent = modal.querySelector('div');
        if (modalContent) {
            modalContent.classList.add('scale-95', 'translate-y-4');
        }
        modal.classList.add('opacity-0', 'pointer-events-none');
        setTimeout(() => {
            modal.classList.add('hidden');
        }, 100);
    }

    // Función para cerrar el modal de pago
    function closeLoginModal() {
        const loginModal = document.getElementById('certificat-stepTwo-modal');
        const loginModalContent = loginModal.querySelector('div');
        if (loginModalContent) {
            loginModalContent.classList.add('scale-95', 'translate-y-4');
        }
        loginModal.classList.add('opacity-0', 'pointer-events-none');
        setTimeout(() => {
            loginModal.classList.add('hidden');
        }, 100);
    }
    
    // Abrir el modal de certificación completada al hacer clic en "FINALIZAR CERTIFICACIÓN"
    document.getElementById('stepThree-btn').addEventListener('click', (e) => {
        e.preventDefault();  // Evita el envío del formulario si es un botón dentro de un form
        const modal = document.getElementById('certificat-stepThree-modal');
        closeLoginModal(); // Cierra el modal de pago
        modal.classList.remove('hidden');
        modal.classList.remove('opacity-0', 'pointer-events-none');
        modal.classList.add('opacity-100');
        setTimeout(() => {
            const modalContent = modal.querySelector('div');
            if (modalContent) modalContent.classList.remove('scale-95', 'translate-y-4');
        }, 10);
    });

    // Cerrar el modal de certificación completada al hacer clic en "CONTINUAR"
document.getElementById('close-btn').addEventListener('click', (e) => {
    closeStepThreeModal();
});

// Cerrar el modal al hacer clic fuera del contenido
document.getElementById('certificat-stepThree-modal').addEventListener('click', (e) => {
    const target = e.target as HTMLElement;  // Casting a HTMLElement
    if (target.id === 'certificat-stepThree-modal') {
        closeStepThreeModal();
    }
});


// Función para cerrar el modal de certificación completada
function closeStepThreeModal() {
    const modal = document.getElementById('certificat-stepThree-modal');
    const modalContent = modal.querySelector('#modal-content');
    if (modalContent) {
        modalContent.classList.add('scale-95', 'translate-y-4');
    }
    modal.classList.add('opacity-0', 'pointer-events-none');
    setTimeout(() => {
        modal.classList.add('hidden');
    }, 100);
}


</script>

